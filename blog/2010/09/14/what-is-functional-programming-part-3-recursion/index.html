
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>What is Functional Programming? Part 3, Recursion - Christopher Bennage</title>
  <meta name="author" content="Christopher Bennage">

  
  <meta name="description" content="In the first post in this series, I provided a list of concepts that I found to be characteristic of functional languages. We’ve talked bout the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dev.bennage.com/blog/2010/09/14/what-is-functional-programming-part-3-recursion/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/ChristopherBennage" rel="alternate" title="Christopher Bennage" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26126539-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Christopher Bennage</a></h1>
  
    <h2>not all who wander are lost</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ChristopherBennage" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dev.bennage.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">What Is Functional Programming? Part 3, Recursion</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-14T07:26:00-07:00" pubdate data-updated="true">Sep 14<span>th</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>In the <a title="part 1 of What is Functional Programming?" href="/blog/2010/09/06/what-is-functional-programming/">first post in this series</a>, I provided a list of concepts that I found to be characteristic of functional languages. We’ve talked bout the first four so far.</p>


<p> <ul> <li><strike>First Class Functions </strike> <li><strike>Higher Order Functions </strike> <li><strike>Pure Functions</strike>  <li><strike>Currying or Partial Application</strike> <a href="/blog/2010/09/09/what-is-functional-programming-part-2-currying/">Covered in the 2nd post.</a>  <li><a title="this is a joke! get it?" href="/blog/2010/09/14/what-is-functional-programming-part-3-recursion/">Recursion</a>  <li>Pattern Matching  <li>Memoization </li></ul> <p><em>Updated: Thanks to <a href="http://bradwilson.typepad.com/" target="_blank">Brad Wilson</a> for recommendation to use !Any() instead of Count()==0.</em></p> <h4>Recursion</h4><pre></pre></p>

<p>A recursive function is a function that calls itself. To quote Wikipedia,</p>


<blockquote>
<p>“Recursion […] is a method of defining functions in which the function being defined is applied within its own definition” <br>- <a href="http://en.wikipedia.org/wiki/Recursion" target="_blank">en.wikipedia.org/wiki/Recursion</a></p></blockquote>


<p>In general, we programmers are shy about using recursion as it can easily lead to the dreaded <a href="http://en.wikipedia.org/wiki/Stack_overflow" target="_blank">stack overflow</a>. However, recursion is crucial aspect of using functional languages. The problem of overflowing the stack can be avoided using something called <a title="tail call is not to be confused with booty call" href="http://en.wikipedia.org/wiki/Tail-call_optimization" target="_blank">tail recursion</a>. But this post is not about <a title="if you don't know how to use the interweb" href="http://lmgtfy.com/?q=what+is+recursion%3F" target="_blank">explaining what recursion is</a>, rather it is about <em>explaining its role</em> in functional languages.</p>


<p>Recursion is a mechanism for controlling flow. In fact, you’ll hardly ever see a loop when writing functional code; you’ll use recursion instead.</p>


<p>Let’s jump straight into an example. Consider our C# function <em>Reduce</em> from the first post:</p>


<pre class="c#:nogutter:nocontrols" name="code">static int Reduce(Func&lt;int, int, int&gt; reducer, IEnumerable&lt;int&gt; values)  
{  
    int accum = 0;  
    foreach (var i in values)  
    {  
        accum = reducer(accum, i);  
    }  
    return accum;  
} </pre>


<p>Now, we can define another function that produces the same output, but uses recursion instead of a loop:</p>


<pre class="c#:nogutter:nocontrols" name="code">static int ReduceF(Func&lt;int, int, int&gt; reducer, IEnumerable&lt;int&gt; values, int seed)
{
    if (!values.Any()) return seed; // #5

    var first = values.First();       // #1
    var remainder = values.Skip(1);   // #2
    var next = reducer(seed, first);  // #3

    return ReduceF(reducer, remainder, next);  //#4
}</pre>


<p>The first thing to note is that <em>ReduceF</em> includes an extra parameter, <em>seed</em>. This new parameter plays a role analogous to the variable <em>accum</em> in the original <em>Reduce</em>. In order to have the same behavior as <em>Reduce</em>, we’d need to pass in an intial value of 0 for <em>seed</em> when calling <em>ReduceF</em>. Don’t get hung up on the extra parameter though. Let’s step through the logic.</p>


<ol>
<li>Skipping over #5, we’ll come back to that. The first real step is to grab the first element in the list. We’ll use the extension method defined in System.Linq to do so. In functional terms, we’d refer to this as the <em>head</em> of the list. 
<li>Next we want to grab the remainder of the list. That is everything remaining after we’ve removed the head. The remainder is called the <em>tail</em>. Depending on the length of the list it might be any number of elements or it might be empty. Again, we’ll use a System.Linq extension method to skip over the first element and return the rest. 
<li>Here we apply our reducer function using the head of the list and the seed value. I named the value <em>next</em> because it will be the seed in our next call to <em>ReduceF</em>. 
<li>This is the recursive call. The reducer function is merely passed through. Notice though that we are passing <em>remainder</em> and <em>next</em>. Each time the function is called, the remainder has one less item. You’ll also see here how the <em>seed</em> parameter takes the place of our mutable <em>accum</em> variable from <em>Reduce</em>. 
<li>Eventually, we’ll pass in a list with no remaining items. When we detect that, we know that <em>seed</em> contains the final reduced value and so we return it. </li></ol>


<p>If the code still doesn’t make sense, spin up a quick console application and execute this</p>


<pre class="c#:nogutter:nocontrols" name="code">Func&lt;int, int, int&gt; add = (i, j) =&gt; i + j;
var integers = new[] {1, 2, 3, 4, 5};
var sum = ReduceF(add, integers, 0);</pre>


<p>and step through each call to <em>ReduceF</em>. Pay attention to the value of <em>seed</em> during each call as well as the count of elements in <em>values</em>.</p>


<h5>Recursion Helps Us Avoid Mutable Data</h5>


<p>We mentioned before that <em>Reduce</em> is a higher order function. Of course, the same is true for <em>ReduceF</em>. However, <em>ReduceF</em> is also more <em>pure</em>.</p>


<p>In our original <em>Reduce</em>, we maintained the state of our reduction using the variable <em>accum</em>. In each iteration of the loop we mutated the value of <em>accum</em>. At first glance, you might think that we are doing something similar in <em>ReduceF</em>. After all, we are defining even more variables inside of it. However, I added these superfluous variables just for readability. We can easily refactor <em>ReduceF</em> into</p>


<pre class="c#:nogutter:nocontrols" name="code">static int ReduceF(Func&lt;int, int, int&gt; reducer, IEnumerable&lt;int&gt; values, int seed)
{
    return (!values.Any()) 
        ? seed 
        : ReduceF(reducer, values.Skip(1), reducer(seed, values.First()));
}</pre>


<p>All I did here was to replace the variables with the functions that I was using to set their values. (Well, I also threw in the glorious <a title="I LOVE this guy!" href="http://msdn.microsoft.com/en-US/library/ty67wk28(v=VS.100).aspx" target="_blank">conditional operator</a> too.)</p>


<p>Now we’ve done away with any internal state! Or, well, at least there is no mutable data. Technically we are still have a state, only it is now in the form of our <em>seed </em>parameter. We’ll see why this is vitally important when we begin discussing “why should we care about functional programming”.</p>


<p><em>Check out the comment from Irné Barnard under </em><a href="/blog/2010/09/06/what-is-functional-programming/"><em>the first post</em></a><em> to see an example of Reduce in Lisp.</em></p>


<p><a href="/blog/2010/09/22/what-is-functional-programming-part-4-linq/">Continue to Part 4.</a></p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Christopher Bennage</span></span>

      








  


<time datetime="2010-09-14T07:26:00-07:00" pubdate data-updated="true">Sep 14<span>th</span>, 2010</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/f-/'>F#</a>, <a class='category' href='/blog/categories/functional-programming/'>functional programming</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://dev.bennage.com/blog/2010/09/14/what-is-functional-programming-part-3-recursion/" data-via="bennage" data-counturl="http://dev.bennage.com/blog/2010/09/14/what-is-functional-programming-part-3-recursion/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/09/09/what-is-functional-programming-part-2-currying/" title="Previous Post: What is Functional Programming? Part 2, Currying">&laquo; What is Functional Programming? Part 2, Currying</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/09/22/what-is-functional-programming-part-4-linq/" title="Next Post: What is Functional Programming? Part 4, Linq">What is Functional Programming? Part 4, Linq &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
<h1>About Christopher</h1>

<img class="bio" src="http://gravatar.com/avatar/0128fa0de6a321d6e3766ae3fa06b9c2?s=80">

<ul><li>
<p>
Christopher is a developer on the <a href="http://msdn.microsoft.com/practices">patterns & practices</a> team at Microsoft.
</p>


<p>
He considers sidewalks to merely be suggestions and frequently falls under the influence of G. K. Chesterton.
</p><p>
He thinks agile software principles and open source software are pretty cool; especially if JavaScript is involved.
</p>
</li>
</ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/05/20/game-dev-03b/">Couple of JavaScript Questions</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/05/game-dev-03/">Building a Game with JavaScript: Making Things Move</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/11/game-dev-02/">Building a Game with JavaScript: Start Screen</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/07/game-dev-01/">Building a Game with JavaScript</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/07/a-n00bs-look-at-html5-game-development/">a n00b's look at HTML5 game development</a>
      </li>
    
  </ul>
</section>
<section>
<div id="recentcomments" class="dsq-widget">
<h1 class="dsq-widget-title">Recent Comments</h1>
<script type="text/javascript" src="http://bennage.disqus.com/recent_comments_widget.js?num_items=&hide_avatars=1&avatar_size=18&excerpt_length="></script>
</div>
</section>
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("bennage", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/bennage" class="twitter-follow-button" data-show-count="false">Follow @bennage</a>
  
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/bennage">@bennage</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'bennage',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Christopher Bennage -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/javascripts/bennage.js"></script>
<script src="/javascripts/newhope.js"></script>

</body>
</html>
